<html>
  <head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
    <script src="{{STATIC_URL}}js/jquery-latest.min.js"></script> 
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <style>
      .ui-widget-header {
        background-color: #feeeef;
        background-image: url('{{STATIC_URL}}img/fluid.jpeg');
      }
      .ui-widget-content {
        background-color: #feeeef;
        background-image: url('{{STATIC_URL}}img/water.png');
      }
    </style>
    <script type="text/javascript">
      $(function(){        
        $('#progressbar').progressbar({
          value:{{ percentalumdatacollected }},
          max: 100
        });

        $('#mybutton').click(function() {
          drawColumnChart();
        });

        $(window).bind("scroll", function() {
          var scroll = $(window).scrollTop();
          var chartoffset = $('#column_chart').offset().top - $('#column_chart').height();
          if(scroll>chartoffset)
          {
            drawColumnChart();
            $(window).unbind('scroll');
          }
        });

      });

      google.load("visualization", "1", {packages:['corechart', 'gauge']});
      google.setOnLoadCallback(drawCharts);
      function drawCharts() {
        drawColumnChart();
        //drawPieChart();
        //drawGaugeChart();
      }

      function drawColumnChart() {

        var options = {
          title: 'Alumni Data Collection by batch',
          hAxis: {title: 'Year', titleTextStyle: {color: 'red'}},
          animation: {duration: 2000, easing: 'out'},
          isStacked: true,
          bar: {groupWidth: '90%'},
          chartArea: {width: '60%', height: '70%'},
          backgroundColor: '#ffeeff',
          vAxis: {minValue:0, maxValue:100}
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('column_chart'));

        var collected = {
              {% for k, v in columnchartdata.items %}
              "{{ k }}": "{{ v }}"{% if not forloop.last %},{% endif %}
              {% endfor %}
        };

        var data = new google.visualization.DataTable();
        data.addColumn('string', 'year');
        data.addColumn('number', 'Collected'); 

        for(var year in collected)
        {
          value = Math.round(parseInt(collected[year])*0.1);
          data.addRow([year, value]);
        }
        chart.draw(data, options);

        var row, newvalue;
        for(i=1; i<=10; i++)
        {
          row = 0, newvalue=0;
          for(var year in collected)
          {
            newvalue = Math.round(parseInt(collected[year])*0.1*i); 
            data.setValue(row, 1, newvalue);
            row++;
          }
          chart.draw(data, options);
        }
      }

      /*function drawPieChart() {

        var options = {
          title: 'Alumni Data Collection Progress',
          animation: {duration: 2000, easing: 'out'},
          chartArea: {width: '60%', height: '70%'},
          backgroundColor: '#ffeeff',
          is3D: true
        };

        var chart = new google.visualization.PieChart(document.getElementById('pie_chart'));
        
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Category');
        data.addColumn('number', 'Number');
        data.addRow(['Collected', {{ totalalumdata }}]);
        data.addRow(['Remaining', {{ remainingalumdata }}]);

        chart.draw(data, options);
      }*/

      /*function drawGaugeChart() {

        var options = {
          width: 250, height: 250,
          minorTicks: 5,
          animation: {duration: 2000, easing: 'linear'},
          max: 30000
        };

        var chart = new google.visualization.Gauge(document.getElementById('gauge'));

        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Collected', 0]
        ]);
        chart.draw(data, options);

        data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Collected', {{ totalalumdata }}]
        ]);
        chart.draw(data, options);

      }*/
    </script>
  </head>
  <body>
    <button id="mybutton">Draw again</button>
    <!--<div id="pie_chart" style="width: 450px; height: 250px; margin: auto;"></div>
    <div id="gauge" style="width: 250px; height: 250px; margin: auto;"></div>-->
    <div style="text-align: center; margin: auto; margin-top: 10px; font-family: Arial;">
      <h4>Overall Alumni Data Collection Progress Bar</h4>
    </div>
    <div id="progressbar" style="width: 900px; margin: auto; margin-top: 10px;margin-bottom: 10px;">
      <div style="float:left; width: {{ percentalumdatacollected }}%;text-align:center;padding-top:7px;">{{percentalumdatacollected}}%</div>
      <div style="float:right;width: {{ percentalumdataremaining }}%;text-align:center;padding-top:7px;">{{percentalumdataremaining}}%</div>
    </div>
    <div id="random1" style="width: 900px; height: 1000px; margin: auto;"></div>
    <div id="column_chart" style="width: 900px; height: 500px; margin: auto;"></div>
    <div id="random2" style="width: 900px; height: 1000px; margin: auto;"></div>
  </body>
</html>